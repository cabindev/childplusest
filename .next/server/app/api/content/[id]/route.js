(()=>{var e={};e.id=633,e.ids=[633],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},8936:(e,t,s)=>{"use strict";s.r(t),s.d(t,{patchFetch:()=>m,routeModule:()=>d,serverHooks:()=>f,workAsyncStorage:()=>h,workUnitAsyncStorage:()=>g});var r={};s.r(r),s.d(r,{GET:()=>u,dynamic:()=>c,revalidate:()=>l});var o=s(2706),n=s(8203),a=s(5994),i=s(9187);let c="force-dynamic",l=0;async function p(e){let t=process.env.WORDPRESS_API_URL||"https://content.childplusest.com",s=`${t}/wp-json/wp/v2/posts/${e}?_embed`;console.log("Fetching from:",s);try{let e=new AbortController,t=setTimeout(()=>e.abort(),15e3),r=await fetch(s,{headers:{"User-Agent":"childplusest-app/1.0",Accept:"application/json"},cache:"no-store",signal:e.signal});if(clearTimeout(t),console.log("Response status:",r.status),console.log("Response headers:",Object.fromEntries(r.headers.entries())),!r.ok){let e=await r.text();return console.error("WordPress API Error:",{status:r.status,statusText:r.statusText,body:e.substring(0,500)}),null}let o=r.headers.get("content-type");if(!o||!o.includes("application/json")){let e=await r.text();return console.error("Invalid content type:",o),console.error("Response preview:",e.substring(0,200)),null}let n=await r.json();return console.log("Successfully fetched post:",n.id,n.title?.rendered||"No title"),n}catch(e){if(console.error("Error fetching post:",e),e instanceof Error&&"AbortError"===e.name){console.log("Request timed out, trying retry...");try{let e=new AbortController,t=setTimeout(()=>e.abort(),1e4),r=await fetch(s,{headers:{"User-Agent":"childplusest-app/1.0",Accept:"application/json"},cache:"no-store",signal:e.signal});if(clearTimeout(t),r.ok){let e=await r.json();return console.log("Retry successful"),e}}catch(e){console.error("Retry also failed:",e)}}return null}}async function u(e,{params:t}){try{let e=(await t).id;if(console.log("Received request for post ID:",e),!e||"string"!=typeof e)return console.error("Invalid post ID provided:",e),i.NextResponse.json({success:!1,error:"Invalid post ID"},{status:400,headers:{"Content-Type":"application/json"}});if(!/^\d+$/.test(e))return console.error("Post ID must be numeric:",e),i.NextResponse.json({success:!1,error:"Post ID must be numeric"},{status:400,headers:{"Content-Type":"application/json"}});console.log("Fetching post with ID:",e);let s=await p(e);if(!s)return console.log("Post not found or error occurred:",e),i.NextResponse.json({success:!1,error:"Post not found"},{status:404,headers:{"Content-Type":"application/json"}});if("code"in s&&"rest_post_invalid_id"===s.code)return console.log("WordPress returned invalid post ID:",e),i.NextResponse.json({success:!1,error:"Post not found"},{status:404,headers:{"Content-Type":"application/json"}});if(!s.id||!s.title)return console.error("Invalid post structure:",s),i.NextResponse.json({success:!1,error:"Invalid post data structure"},{status:500,headers:{"Content-Type":"application/json"}});return console.log("Successfully returning post:",s.id),i.NextResponse.json({success:!0,data:s},{headers:{"Cache-Control":"no-store, must-revalidate","Content-Type":"application/json"}})}catch(e){return console.error("API Route Error:",{message:e.message,stack:e.stack,name:e.name}),i.NextResponse.json({success:!1,error:"เกิดข้อผิดพลาดภายในเซิร์ฟเวอร์",details:void 0},{status:500,headers:{"Content-Type":"application/json"}})}}let d=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/content/[id]/route",pathname:"/api/content/[id]",filename:"route",bundlePath:"app/api/content/[id]/route"},resolvedPagePath:"/Applications/MAMP/htdocs/childplusest/app/api/content/[id]/route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:h,workUnitAsyncStorage:g,serverHooks:f}=d;function m(){return(0,a.patchFetch)({workAsyncStorage:h,workUnitAsyncStorage:g})}},6487:()=>{},8335:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,452],()=>s(8936));module.exports=r})();