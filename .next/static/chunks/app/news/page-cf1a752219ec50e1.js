(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[324],{4928:(e,a,t)=>{Promise.resolve().then(t.bind(t,8979))},295:(e,a,t)=>{"use strict";t.d(a,{Ar:()=>o,JR:()=>s,RT:()=>l,Zu:()=>r,f0:()=>n});let r="G-LR831E9CMW",s=e=>{window.gtag&&window.gtag("config",r,{page_path:e,custom_map:{custom_parameter_1:"page_type"}})},n=e=>{window.gtag&&window.gtag("event",e.action,{event_category:e.category,event_label:e.label,value:e.value})},l=e=>{n({action:"story_click",category:"content",label:e})},o=(e,a)=>{n({action:"search",category:"search",label:e,value:a})}},586:(e,a,t)=>{"use strict";t.d(a,{p:()=>s});var r=t(6457);function s(e){return r.A.sanitize(e,{ALLOWED_TAGS:["p","br","strong","em","u","h1","h2","h3","h4","h5","h6","ul","ol","li","a","img","blockquote","code","pre","table","thead","tbody","tr","th","td","div","span"],ALLOWED_ATTR:["href","src","alt","title","class","id","target","rel"]})}},1565:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});var r=t(5155);function s(){return(0,r.jsx)("div",{className:"py-12",children:(0,r.jsxs)("div",{className:"container mx-auto px-4",children:[(0,r.jsx)("div",{className:"w-48 h-10 bg-gray-200 rounded-md mx-auto mb-8 animate-pulse"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,a)=>(0,r.jsx)("div",{className:"rounded-lg shadow-md overflow-hidden bg-gray-100",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("div",{className:"h-7 bg-gray-200 rounded-md mb-4 animate-pulse"}),(0,r.jsx)("div",{className:"relative h-40 mb-4 bg-gray-200 rounded-md animate-pulse"}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{className:"w-20 h-5 bg-gray-200 rounded-md animate-pulse"}),(0,r.jsx)("div",{className:"w-16 h-8 bg-gray-200 rounded-full animate-pulse"})]})]})},a))})]})})}},8979:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var r=t(5155),s=t(2115),n=t(8173),l=t.n(n),o=t(5565),i=t(6046),d=t(586),c=t(1565),m=t(295);function u(){let[e,a]=(0,s.useState)([]),[t,n]=(0,s.useState)(!0),[u,h]=(0,s.useState)(""),[g,x]=(0,s.useState)(1),p=(0,i.useRouter)(),b=Number((0,i.useSearchParams)().get("page")||"1");(0,s.useEffect)(()=>{!async function(){try{n(!0);let e=await fetch("/api/content?page=".concat(b,"&per_page=8")),t=await e.json();t.success&&t.posts?(a(t.posts),x(Number(t.totalPages)||1),(0,m.f0)({action:"content_loaded",category:"news",label:"page_".concat(b),value:t.posts.length})):(h("ไม่สามารถโหลดข้อมูลได้"),(0,m.f0)({action:"content_load_error",category:"news",label:"api_error"}))}catch(e){h("เกิดข้อผิดพลาดในการโหลดข้อมูล"),console.error(e),(0,m.f0)({action:"content_load_error",category:"news",label:"network_error"})}finally{n(!1)}}()},[b]);let v=e=>{e<1||e>g||((0,m.f0)({action:"pagination_click",category:"navigation",label:"page_".concat(b,"_to_").concat(e)}),p.push("/news?page=".concat(e)))},y=e=>{let a=e.title.rendered.replace(/<[^>]+>/g,"");(0,m.f0)({action:"article_click",category:"content",label:a})};return t?(0,r.jsxs)("div",{className:"container mx-auto px-4 py-12",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-8 text-center",children:"ข่าวสารทั้งหมด"}),(0,r.jsx)(c.A,{})]}):u?(0,r.jsx)("div",{className:"container mx-auto px-4 py-12",children:(0,r.jsxs)("div",{className:"bg-red-100 p-4 rounded-lg text-center animate-fadeIn",children:[(0,r.jsx)("p",{className:"text-red-700",children:u}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"ลองใหม่อีกครั้ง"})]})}):(0,r.jsxs)("div",{className:"container mx-auto px-4 py-12",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2 text-center",children:"ข่าวสารทั้งหมด"}),(0,r.jsx)("p",{className:"text-gray-600 text-center mb-8",children:"ติดตามข่าวสารและกิจกรรมล่าสุดของเรา"}),0===e.length?(0,r.jsx)("div",{className:"text-center py-10 animate-fadeIn",children:"ไม่พบข่าวสาร"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map((e,a)=>{var t,s,n;let i=null===(n=e._embedded)||void 0===n?void 0:null===(s=n["wp:featuredmedia"])||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.source_url;return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1",style:{animationDelay:"".concat(50*a,"ms")},children:[i&&(0,r.jsx)(l(),{href:"/news/".concat(e.id),onClick:()=>y(e),children:(0,r.jsxs)("div",{className:"relative h-48 overflow-hidden",children:[(0,r.jsx)(o.default,{src:i,alt:e.title.rendered,fill:!0,style:{objectFit:"cover"},className:"transition-transform duration-500 hover:scale-105"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300"})]})}),(0,r.jsxs)("div",{className:"p-5",children:[(0,r.jsx)("h2",{className:"text-lg font-bold mb-2 line-clamp-2 hover:text-kids-purple transition-colors",children:(0,r.jsx)("span",{dangerouslySetInnerHTML:{__html:(0,d.p)(e.title.rendered)}})}),(0,r.jsx)("div",{className:"text-gray-600 mb-4 text-sm line-clamp-3",dangerouslySetInnerHTML:{__html:(0,d.p)(e.excerpt.rendered)}}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleDateString("th-TH")}),(0,r.jsx)(l(),{href:"/news/".concat(e.id),onClick:()=>y(e),className:"bg-emerald-100 hover:bg-emerald-200 text-emerald-800 text-sm font-medium py-1 px-3 rounded-md transition-all duration-200 hover:scale-105",children:"อ่านต่อ"})]})]})]},e.id)})}),(0,r.jsx)("div",{className:"text-center mt-6 mb-4",children:(0,r.jsxs)("p",{className:"text-gray-500",children:["แสดงหน้า ",b," จาก ",g," หน้า (รวม ",e.length," บทความ)"]})}),(()=>{let e=[],a=Math.max(1,b-Math.floor(2.5)),t=Math.min(g,a+5-1);t-a+1<5&&(a=Math.max(1,t-5+1)),e.push((0,r.jsx)("button",{onClick:()=>v(b-1),disabled:1===b,className:"px-3 py-1 rounded-md bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"\xab"},"prev")),a>1&&(e.push((0,r.jsx)("button",{onClick:()=>v(1),className:"px-3 py-1 rounded-md hover:bg-gray-50 border border-gray-300 transition-all",children:"1"},"1")),a>2&&e.push((0,r.jsx)("span",{className:"px-3 py-1",children:"..."},"ellipsis1")));for(let s=a;s<=t;s++)e.push((0,r.jsx)("button",{onClick:()=>v(s),className:"px-3 py-1 rounded-md transition-all ".concat(b===s?"bg-emerald-500 text-white shadow-md":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"),children:s},s));return t<g&&(t<g-1&&e.push((0,r.jsx)("span",{className:"px-3 py-1",children:"..."},"ellipsis2")),e.push((0,r.jsx)("button",{onClick:()=>v(g),className:"px-3 py-1 rounded-md hover:bg-gray-50 border border-gray-300 transition-all",children:g},g))),e.push((0,r.jsx)("button",{onClick:()=>v(b+1),disabled:b===g,className:"px-3 py-1 rounded-md bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"\xbb"},"next")),(0,r.jsx)("div",{className:"flex justify-center space-x-2 mt-8",children:e})})()]}),(0,r.jsx)("div",{className:"text-center mt-10",children:(0,r.jsx)(l(),{href:"/",onClick:()=>{(0,m.f0)({action:"navigation",category:"user_behavior",label:"news_to_home"})},className:"inline-block bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-2 px-6 rounded-lg transition-all duration-200 hover:scale-105",children:"กลับไปหน้าหลัก"})})]})}function h(){let e=(0,s.useRef)(Date.now());return(0,s.useEffect)(()=>{e.current=Date.now(),(0,m.f0)({action:"page_view",category:"news",label:"news_page"});let a=()=>{let a=Math.round((Date.now()-e.current)/1e3);a>5&&(0,m.f0)({action:"time_on_page",category:"engagement",label:"news_page",value:a})};return window.addEventListener("beforeunload",a),()=>window.removeEventListener("beforeunload",a)},[]),(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{className:"container mx-auto py-12 px-4 text-center",children:"กำลังโหลด..."}),children:(0,r.jsx)(u,{})})}},6046:(e,a,t)=>{"use strict";var r=t(6658);t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})}},e=>{var a=a=>e(e.s=a);e.O(0,[742,869,441,517,358],()=>a(4928)),_N_E=e.O()}]);