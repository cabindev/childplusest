(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[86],{6893:(e,t,o)=>{Promise.resolve().then(o.bind(o,6705)),Promise.resolve().then(o.bind(o,4131)),Promise.resolve().then(o.bind(o,3094)),Promise.resolve().then(o.t.bind(o,8173,23)),Promise.resolve().then(o.t.bind(o,7970,23))},586:(e,t,o)=>{"use strict";o.d(t,{p:()=>r});var s=o(6457);function r(e){return s.A.sanitize(e,{ALLOWED_TAGS:["p","br","strong","em","u","h1","h2","h3","h4","h5","h6","ul","ol","li","a","img","blockquote","code","pre","table","thead","tbody","tr","th","td","div","span"],ALLOWED_ATTR:["href","src","alt","title","class","id","target","rel"]})}},6705:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var s=o(5155),r=o(2115),a=o(8173),n=o.n(a),l=o(5565),c=o(586);function i(e){let{postId:t}=e,[o,a]=(0,r.useState)([]),[i,d]=(0,r.useState)(!0),[h,u]=(0,r.useState)("");return((0,r.useEffect)(()=>{(async function(){try{d(!0);let e=await fetch("/api/content/related/".concat(t)),o=await e.json();o.success?a(o.posts):u("Failed to load related posts")}catch(e){u("Error loading related posts"),console.error(e)}finally{d(!1)}})()},[t]),i)?(0,s.jsx)("div",{className:"animate-pulse text-center py-6",children:"กำลังโหลด..."}):h||0===o.length?null:(0,s.jsxs)("div",{className:"mt-12 max-w-4xl mx-auto",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:"absolute -top-10 left-0 right-0 h-16 w-screen -ml-[50vw] left-1/2",children:(0,s.jsx)("svg",{viewBox:"0 0 1200 120",preserveAspectRatio:"none",className:"absolute top-0 w-full h-full",children:(0,s.jsx)("path",{d:"M985.66,92.83C906.67,72,823.78,31,743.84,14.19c-82.26-17.34-168.06-16.33-250.45.39-57.84,11.73-114,31.07-172,41.86A600.21,600.21,0,0,1,0,27.35V120H1200V95.8C1132.19,118.92,1055.71,111.31,985.66,92.83Z",className:"fill-kids-yellow opacity-30"})})})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-center mb-8 relative",children:(0,s.jsx)("span",{className:"bg-kids-peach px-6 py-2 rounded-full inline-block",children:"บทความน่าสนใจอื่นๆ"})}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map((e,t)=>{var o,r,a;let i=["bg-kids-blue","bg-kids-green","bg-kids-pink"],d=null===(a=e._embedded)||void 0===a?void 0:null===(r=a["wp:featuredmedia"])||void 0===r?void 0:null===(o=r[0])||void 0===o?void 0:o.source_url;return(0,s.jsx)(n(),{href:"/news/".concat(e.id),className:"block group",children:(0,s.jsx)("div",{className:"card-kids h-full overflow-hidden ".concat(0===t?"animate-wiggle":"animate-float"," ").concat(["","animation-delay-1000","animation-delay-2000"][t]),children:(0,s.jsxs)("div",{className:"p-5 ".concat(i[t%i.length]," bg-opacity-30 h-full flex flex-col"),children:[d&&(0,s.jsx)("div",{className:"relative h-40 rounded-xl overflow-hidden mb-4",children:(0,s.jsx)(l.default,{src:d,alt:e.title.rendered,fill:!0,style:{objectFit:"cover"},className:"transition-transform duration-500 group-hover:scale-110"})}),(0,s.jsx)("h3",{className:"text-lg font-bold mb-2 line-clamp-2 group-hover:text-gray-700",dangerouslySetInnerHTML:{__html:(0,c.p)(e.title.rendered)}}),(0,s.jsxs)("div",{className:"mt-auto flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-xs font-medium bg-white/70 rounded-full px-2 py-1",children:new Date(e.date).toLocaleDateString("th-TH")}),(0,s.jsxs)("span",{className:"inline-flex items-center font-bold text-sm text-gray-700",children:["อ่านเพิ่มเติม",(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1 transition-transform group-hover:translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})})},e.id)})})]})}},4131:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var s=o(5155),r=o(2115);function a(e){let{title:t,url:o}=e,[a,n]=(0,r.useState)(!1),l=o||window.location.href,c=encodeURIComponent(t),i=encodeURIComponent(l),d=async()=>{try{await navigator.clipboard.writeText(l),n(!0),setTimeout(()=>n(!1),2e3)}catch(t){console.error("Failed to copy link:",t);let e=document.createElement("textarea");e.value=l,document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy"),n(!0),setTimeout(()=>n(!1),2e3)}catch(e){console.error("Fallback copy failed:",e)}document.body.removeChild(e)}},h=[{name:"Facebook",icon:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),url:"https://www.facebook.com/sharer/sharer.php?u=".concat(i,"&quote=").concat(c),color:"bg-blue-600 hover:bg-blue-700"},{name:"Twitter",icon:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})}),url:"https://twitter.com/intent/tweet?text=".concat(c,"&url=").concat(i),color:"bg-sky-500 hover:bg-sky-600"},{name:"LINE",icon:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.627-.63h2.386c.349 0 .63.285.63.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.627-.63.349 0 .631.285.631.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.070 9.436-6.975C23.176 14.393 24 12.458 24 10.314"})}),url:"https://social-plugins.line.me/lineit/share?url=".concat(i),color:"bg-green-500 hover:bg-green-600"}],u=e=>{window.open(e,"_blank","width=600,height=400")};return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600 mr-2",children:"แชร์:"}),h.map(e=>(0,s.jsx)("button",{onClick:()=>u(e.url),className:"".concat(e.color," text-white p-2 rounded-full transition-colors duration-200 hover:scale-105 transform"),title:"แชร์ใน ".concat(e.name),children:e.icon},e.name)),(0,s.jsx)("button",{onClick:d,className:"".concat(a?"bg-green-500 hover:bg-green-600":"bg-gray-500 hover:bg-gray-600"," text-white p-2 rounded-full transition-all duration-200 hover:scale-105 transform"),title:"คัดลอกลิงก์",children:a?(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),a&&(0,s.jsx)("span",{className:"text-sm text-green-600 animate-pulse",children:"คัดลอกแล้ว!"})]})}},3094:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var s=o(5155),r=o(2115);function a(e){let{postId:t}=e,[o,a]=(0,r.useState)(null),[n,l]=(0,r.useState)(!0),[c,i]=(0,r.useState)("");return((0,r.useEffect)(()=>{let e=()=>{let e=JSON.parse(localStorage.getItem("viewedPosts")||"{}"),o=e[t];return!!(o&&Date.now()-o<36e5)||(e[t]=Date.now(),localStorage.setItem("viewedPosts",JSON.stringify(e)),!1)};async function o(){try{if(l(!0),i(""),e()){let e=await fetch("/api/content/views/".concat(t),{cache:"no-store"});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let o=await e.json();if(o.success)a(o.count);else throw Error(o.error||"Failed to fetch view count")}else{let e=await fetch("/api/content/views/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let o=await e.json();if(o.success)a(o.count);else throw Error(o.error||"Failed to increment view count")}}catch(e){console.error("Error with view count:",e),i("Failed to load view count");try{let e=await fetch("/api/content/views/".concat(t),{cache:"no-store"});if(e.ok){let t=await e.json();t.success&&(a(t.count),i(""))}}catch(e){console.error("Error fetching view count:",e)}}finally{l(!1)}}t&&o()},[t]),n)?(0,s.jsxs)("span",{className:"text-gray-500 text-sm flex items-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 animate-spin",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,s.jsx)("span",{className:"animate-pulse",children:"กำลังโหลด..."})]}):c?null:(0,s.jsxs)("span",{className:"text-gray-500 text-sm flex items-center group transition-all duration-300",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 group-hover:text-kids-blue transition-colors duration-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),(0,s.jsxs)("span",{className:"group-hover:text-kids-blue transition-colors duration-300",children:[(null==o?void 0:o.toLocaleString("th-TH"))||0," ครั้ง"]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[742,869,441,517,358],()=>t(6893)),_N_E=e.O()}]);